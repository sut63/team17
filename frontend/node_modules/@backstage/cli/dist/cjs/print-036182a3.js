'use strict';

require('commander');
require('chalk');
var index = require('./index-e080fd1a.js');
require('fs-extra');
require('@backstage/cli-common');
var configLoader = require('@backstage/config-loader');
var config = require('@backstage/config');
var yaml = require('yaml');

var print = async (cmd) => {
  var _a, _b, _c;
  const appConfigs = await configLoader.loadConfig({
    env: (_b = (_a = cmd.env) != null ? _a : process.env.NODE_ENV) != null ? _b : "development",
    shouldReadSecrets: (_c = cmd.withSecrets) != null ? _c : false,
    rootPaths: [index.paths.targetRoot, index.paths.targetDir]
  });
  const flatConfig = config.ConfigReader.fromConfigs(appConfigs).get();
  if (cmd.format === "json") {
    process.stdout.write(`${JSON.stringify(flatConfig, null, 2)}
`);
  } else {
    process.stdout.write(`${yaml.stringify(flatConfig)}
`);
  }
};

exports.default = print;
